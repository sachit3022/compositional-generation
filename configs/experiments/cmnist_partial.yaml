defaults:
  - /diffusion: cmnist_dm
  - /dataset: cmnist_uniform
  - _self_

seed: 42
callbacks:
  ema_callback:
    _target_ : score.ema.EMA
    decay: 0.9999
    validate_original_weights: true
    every_n_steps: 100
  lr_monitor:
    _target_: pytorch_lightning.callbacks.LearningRateMonitor
    logging_interval: epoch
  sampling_callback:
    _target_: callbacks.tracker.TrainingTracker
    sampling_pipe: 
      _target_: score.pipelines.CondDDIMPipeline
      _partial_: true 
    guidance_scale: 7.5
    num_inference_steps: 50
    output_dir: ${hydra:run.dir}

diffusion:
  lambda_coind : 1.0

loggers:
  tensorboard_logger:
    _target_: pytorch_lightning.loggers.TensorBoardLogger
    save_dir: ${hydra:run.dir}
    name: diffusion
  csv_logger:
    _target_: pytorch_lightning.loggers.CSVLogger
    save_dir: ${hydra:run.dir}
    name: diffusion

trainer:
  max_steps: ${experiments.diffusion.scheduler.num_training_steps}
  accelerator: gpu
  gradient_clip_val: 1.0
  enable_checkpointing: true




